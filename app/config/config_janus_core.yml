janus_service_registry_core:
    admin:
        name: 'JANUS admin'
        email: janusadmin@example.org

    # Auth source used to gain access to JANUS
    auth: admin

    # Attibute used to identify users
    useridattr: user

    # Automatically create a new user if user does not exist on login
    user:
        autocreate: true

    # Dashboard configuration
    dashboard:
        inbox:
            paginate_by: 20

    entity:
        # Metadata field used as pretty name for entities
        prettyname: 'name:en'

        # JANUS supports a blacklist (mark idps that are not allowed to connect to an sp)
        # and/or a whitelist (mark idps that are allowed to connect to an sp).
        # You can enable both to make this choice per entity.
        useblacklist: true
        usewhitelist: false

        validateEntityId: true

    # Enable entity types
    enable:
        saml20-sp: true
        saml20-idp: true
        shib13-sp: false
        shib13-idp: false

    # Allow manual (or future automatic) pushing of all connections to remote system.
    push:
       remote:
           test:
               name: "OpenConext Engineblock"
               url: "https://janus:janus_password@engine-api.openconext.example.org/api/connections"
       # Disable SSL verification for test environments (should not be on in prod!)
       requestOptions:
           verify: false

    # Configuration of systems in JANUS
    workflowstates:
        testaccepted:
            name:
                en: Test
            description:
                en: 'All test should be performed in this state'
            isDeployable: true
            textColor: red
            abbr: 'TA'
        prodaccepted:
            name:
                en: Production
            description:
                en: 'The connection is on the Production system'
            isDeployable: true
            textColor: green
            abbr: 'PA'

    # Default workflow state when creating new entities
    workflowstate:
        default: testaccepted

    # Allowed attributes
    attributes:
      eduPersonTargetedID:
          name: 'urn:mace:dir:attribute-def:eduPersonTargetedID'
      eduPersonPrincipalName:
          name: 'urn:mace:dir:attribute-def:eduPersonPrincipalName'
      displayName:
          name: 'urn:mace:dir:attribute-def:displayName'
      'Common name (cn)':
          name: 'urn:mace:dir:attribute-def:cn'
      givenName:
          name: 'urn:mace:dir:attribute-def:givenName'
      'Surname (sn)':
          name: 'urn:mace:dir:attribute-def:sn'
      mail:
          name: 'urn:mace:dir:attribute-def:mail'
      'mail (claim)':
          name: 'http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress'
      schacHomeOrganization:
          name: 'urn:mace:terena.org:attribute-def:schacHomeOrganization'
      schacHomeOrganizationType:
          name: 'urn:mace:terena.org:attribute-def:schacHomeOrganizationType'
      schacPersonalUniqueCode:
          name: 'urn:schac:attribute-def:schacPersonalUniqueCode'
      eduPersonAffiliation:
          name: 'urn:mace:dir:attribute-def:eduPersonAffiliation'
          specify_values: true
      eduPersonScopedAffiliation:
          name: 'urn:mace:dir:attribute-def:eduPersonScopedAffiliation'
          specify_values: true
      eduPersonEntitlement:
          name: 'urn:mace:dir:attribute-def:eduPersonEntitlement'
          specify_values: true
      isMemberOf:
          name: 'urn:mace:dir:attribute-def:isMemberOf'
          specify_values: true
      uid:
          name: 'urn:mace:dir:attribute-def:uid'
      preferredLanguage:
          name: 'urn:mace:dir:attribute-def:preferredLanguage'
      'collabPersonId':
          name: 'urn:oid:1.3.6.1.4.1.1076.20.40.40.1'

    attribute_sources:
#      - voot
#      - sab

    metadatafields:
        # Upload path for metadata field files
        uploadpath: /tmp/janus/

        # Allowed metadata names for IdPs
        saml20-idp:
            # Endpoint fields
            'SingleSignOnService:#:Binding':
                type: select
                select_values:
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:SOAP'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:PAOS'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:URI'
                default: 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect'
                default_allow: true
                required: true
                supported:
                    - 0
            'SingleSignOnService:#:Location':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: true
                validate: isurl
                supported:
                    - 0
            'SingleLogoutService:#:Binding':
                type: select
                select_values:
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:SOAP'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:PAOS'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:URI'
                default: 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect'
                default_allow: true
                required: false
                supported:
                    - 0
            'SingleLogoutService:#:Location':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: isurl
                supported:
                    - 0
            'SingleLogoutService:#:ResponseLocation':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: isurl
                supported:
                    - 0

            #  Certificate fields
            certData:
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: true
            certData2:
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
            certData3:
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
            'certFingerprint:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: leneq40
                supported:
                    - 0

            # Information fields
            'name:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'displayName:#':
                type: text
                default: ''
                default_allow: false
                required: false
                supported:
                    - en
                    - nl
            'description:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'url:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl

            # Contact person fields
            'contacts:#:contactType':
                type: select
                default: technical
                select_values:
                    - technical
                    - support
                    - administrative
                    - billing
                    - other
                default_allow: true
                supported:
                    - 0
            'contacts:#:givenName':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:surName':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:emailAddress':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:telephoneNumber':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:company':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0

            # Organization fields
            'OrganizationName:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'OrganizationDisplayName:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'OrganizationURL:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
                validate: isurl

            # Logo
            'logo:#:url':
                required: true
                default: 'https://.png'
                default_allow: false
                type: text
                validate: isurl
                supported:
                    - 0
            'logo:#:width':
                required: true
                default: '250'
                type: text
                default_allow: true
                validate: isint
                supported:
                    - 0
            'logo:#:height':
                required: true
                default: '73'
                type: text
                default_allow: true
                validate: isint
                supported:
                    - 0

            # Control fields
            redirect.sign:
                type: boolean
                default: true
                default_allow: true
                required: false
            redirect.validate:
                type: boolean
                default: true
                default_allow: true
                required: false
            base64attributes:
                type: boolean
                default: true
                default_allow: true
                required: false
            assertion.encryption:
                type: boolean
                default: false
                default_allow: true
                required: false
            NameIDFormat:
                type: text
                default: 'CHANGE THIS'
                default_allow: false

            # Coin settings
            'coin:disable_scoping':
                type: boolean
                default: false
                default_allow: true
                required: false
            'coin:schachomeorganization':
                type: text
                default: ''
                default_allow: false
                required: false
            'coin:signature_method':
                type: select
                required: false
                select_values:
                    - 'http://www.w3.org/2000/09/xmldsig#rsa-sha1'
                    - 'http://www.w3.org/2001/04/xmldsig-more#rsa-sha256'
                default_allow: true

        # Allowed metadata names for shib IdPs.
        shib13-idp:
            SingleLogoutService:
                type: text
                default: 'CHANGE THIS'
                required: true
                validate: isurl
            SingleSignOnService:
                type: text
                default: 'CHANGE THIS'
                required: true
                validate: isurl

            # Certificate fields
            certData:
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: true
            certData2:
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
            'certFingerprint:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: leneq40
                supported:
                    - 0

            # Information fields
            'name:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - da
            'description:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'url:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl

            # Contact person fields
            'contacts:#:contactType':
                type: select
                default: technical
                select_values:
                    - technical
                    - support
                    - administrative
                    - billing
                    - other
                default_allow: true
                supported:
                    - 0
            'contacts:#:givenName':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:surName':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:emailAddress':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:telephoneNumber':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:company':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0

            # Organization fields
            'OrganizationName:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'OrganizationDisplayName:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'OrganizationURL:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
                validate: isurl

            # Control fields
            redirect.sign:
                type: boolean
                default: true
                default_allow: true
                required: false
            redirect.validate:
                type: boolean
                default: true
                default_allow: true
                required: false
            base64attributes:
                type: boolean
                default: true
                default_allow: true
                required: false
            assertion.encryption:
                type: boolean
                default: false
                default_allow: true
                required: false
            NameIDFormat:
                type: text
                default: 'CHANGE THIS'
                default_allow: false

        # Allowed metadata names for SPs.
        saml20-sp:
            # Endpoint fields
            'AssertionConsumerService:#:Binding':
                type: select
                select_values:
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:SOAP'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:PAOS'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:URI'
                default: 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST'
                default_allow: true
                required: false
                supported:
                    - 0
                    - 1
            'AssertionConsumerService:#:Location':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: isurl
                supported:
                    - 0
                    - 1
            'AssertionConsumerService:#:index':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: isint
                supported:
                    - 0
                    - 1
            'SingleLogoutService:#:Binding':
                type: select
                select_values:
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:SOAP'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:PAOS'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact'
                    - 'urn:oasis:names:tc:SAML:2.0:bindings:URI'
                default: 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect'
                default_allow: true
                required: false
                supported:
                    - 0
            'SingleLogoutService:#:Location':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: isurl
                supported:
                    - 0
            'SingleLogoutService:#:ResponseLocation':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: isurl
                supported:
                    - 0
            # Certificate fields
            certData:
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: true
            certData2:
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
            'certFingerprint:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                required: false
                validate: leneq40
                supported:
                    - 0

            # Information fields
            'name:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'displayName:#':
                type: text
                default: ''
                default_allow: false
                required: false
                supported:
                    - en
                    - nl
            'description:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'url:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl

            # Contact person fields
            'contacts:#:contactType':
                type: select
                default: technical
                select_values:
                    - technical
                    - support
                    - administrative
                    - billing
                    - other
                default_allow: true
                supported:
                    - 0
            'contacts:#:givenName':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:surName':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:emailAddress':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:telephoneNumber':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0
            'contacts:#:company':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - 0

            # Organization fields
            'OrganizationName:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'OrganizationDisplayName:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
            'OrganizationURL:#':
                type: text
                default: 'CHANGE THIS'
                default_allow: false
                supported:
                    - en
                    - nl
                validate: isurl

            # Logo
            'logo:#:url':
                required: true
                default: 'https://.png'
                default_allow: false
                type: text
                validate: isurl
                supported:
                    - 0
            'logo:#:width':
                required: true
                default: '250'
                type: text
                default_allow: true
                validate: isint
                supported:
                    - 0
            'logo:#:height':
                required: true
                default: '73'
                type: text
                default_allow: true
                validate: isint
                supported:
                    - 0

            # Control fields
            redirect.sign:
                type: boolean
                default: true
                default_allow: true
                required: false
            redirect.validate:
                type: boolean
                default: true
                default_allow: true
                required: false
            base64attributes:
                type: boolean
                default: true
                default_allow: true
                required: false
            assertion.encryption:
                type: boolean
                default: false
                default_allow: true
                required: false
            NameIDFormat:
                type: text
                default: 'CHANGE THIS'
                default_allow: false

            # Coin settings
            'coin:no_consent_required':
                type: boolean
                default: true
                required: true
            'coin:do_not_add_attribute_aliases':
                type: boolean
                default: true
                required: true
            'coin:trusted_proxy':
                type: boolean
                default: false
                default_allow: true
                required: false
            'coin:signature_method':
                type: select
                required: false
                select_values:
                    - 'http://www.w3.org/2000/09/xmldsig#rsa-sha1'
                    - 'http://www.w3.org/2001/04/xmldsig-more#rsa-sha256'
                default_allow: true

    # specify mapping from metadata key to db key
    md:
        mapping:
            'UIInfo:Logo:0:height': 'logo:0:height'
            'UIInfo:Logo:0:width': 'logo:0:width'
            'UIInfo:Logo:0:url': 'logo:0:url'
            'UIInfo:Keywords:en': 'keywords:en'
            'UIInfo:Keywords:nl': 'keywords:nl'
            'UIInfo:Description:en': 'description:en'
            'UIInfo:Description:nl': 'description:nl'

    # Usertypes
    usertypes:
        - admin # Builtin admin user type. Define if you want to create more admin user accounts.
        - operations
        - secretariat
        - experimental
        # SAML 2.0 contact types
        - technical
        - support
        - administrative
        - billing
        - other

    messenger:
        # Default type for subscriptions
        default: INBOX
        external:
            mail:
                class: 'janus:SimpleMail'
                name: Mail
                option:
                    headers: "MIME-Version: 1.0\r\nContent-type: text/html; charset=iso-8859-1\r\nFrom: JANUS <no-reply@example.org>\r\nReply-To: JANUS Admin <admin@example.org>"

    encryption:
        enable: false

    # Cron tags says when Janus hook is executed
    # Uncomment to enable the cron job
    #
    # metadata_refresh_cron_tags: [hourly]
    # validate_entity_certificate_cron_tags: [daily]
    # validate_entity_endpoints_cron_tags: [daily]

    mdexport:
        postprocessor:
            filesystem:
                class: 'janus:FileSystem'
                name: Filesystem
                option:
                    path: /path/to/put/metadata.xml
            FTP:
                class: 'janus:FTP'
                name: FTP
                option:
                    host: hostname
                    path: /path/to/put/metadata.xml
                    username: jach
                    password: xxx

        # Preconfigured metadata feeds available through the metadata exporter
        feeds:
            # Sample feed for production state.
            # At least states and types must be set
            prod:
                types:
                    - saml20-sp
                states:
                    - prod
                mime: application/samlmetadata+xml
                exclude:
                    - 'https://example.org/saml/metadata.xml'
                postprocessor: null
                entitiesDescriptorName: 'Sample Federation'
                filename: sample_federation.xml
                maxCache: 172800 # 24 hour cache time
                maxDuration: 604800 # Maximum 5 days duration on ValidUntil
                sign:
                    enable: true
                    privatekey: sample_server.pem
                    privatekey_pass: 'VERY SECRET PASSWORD'
                    certificate: sample_server.crt

        # Predefined allowed mimetypes in the metadata exporter
        allowed_mime:
            1: application/xml
            2: application/samlmetadata+xml
            3: application/simplesamlphp+text

        # Default options for metadata exporter
        default_options:
            # Top entityDescriptor name
            entitiesDescriptorName: Federation

            # Default mimetype
            mime: application/xml

            # Cache options
            maxCache: 86400 # 24 hour cache time
            maxDuration: 432000 #Maximum 5 days duration on ValidUntil.
            sign:
                # Whether metadata should be signed
                enable: false

                # Private key which should be used when signing the metadata
                privatekey: server.pem

                # Password to decrypt private key, or NULL if the private key is unencrypted
                privatekey_pass: null

                # Certificate which should be included in the signature. Should correspond to the private key
                certificate: server.crt

    # Access configuration of JANUS.
    #
    # If a permission is not set for a given user for a given system, the default
    # permission is given.
    access:
        changeentitytype:
            default: false
            workflow_states:
                all:
                    - all
        exportmetadata:
            default: false
            workflow_states:
                all:
                    - all
        blockremoteentity:
            default: false
            workflow_states:
                all:
                    - all
        changeworkflow:
            default: true
        changeentityid:
            default: true
        addmetadata:
            default: false
            workflow_states:
                all:
                    - all
        deletemetadata:
            default: false
            workflow_states:
                all:
                    - all
        modifymetadata:
            default: false
            workflow_states:
                all:
                    - all
        importmetadata:
            default: false
            workflow_states:
                all:
                    - all
        validatemetadata:
            default: true
        changemanipulation:
            default: true
        entityhistory:
            default: true
        disableconsent:
            default: false
            workflow_states:
                all:
                    - all
        createnewentity:
            workflow_states:
                all:
                    - all
        showsubscriptions:
            workflow_states:
                all:
                    - all
        addsubscriptions:
            workflow_states:
                all:
                    - all
        editsubscriptions:
            workflow_states:
                all:
                    - all
        deletesubscriptions:
            workflow_states:
                all:
                    - all
        exportallentities:
            workflow_states:
                all:
                    - all
        arpeditor:
            workflow_states:
                all:
                    - all
        federationtab:
            workflow_states:
                all:
                    - all
        admintab:
            workflow_states:
                all:
                    - all
        adminusertab:
            workflow_states:
                all:
                    - all
        allentities:
            workflow_states:
                all:
                    - all
        experimental:
            workflow_states:
                all:
                    - all

    # CA bundle used for checking,
    # by default check for path used by ca-certificates package
    ca_bundle_file: /etc/pki/tls/certs/ca-bundle.crt
    workflow:
        testaccepted:
            prodaccepted:
                role:
                    - operations
                    - technical
                    - secretariat
        prodaccepted:
            testaccepted:
                role:
                    - operations
                    - technical
                    - secretariat
