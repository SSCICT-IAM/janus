# Usage: ./RMT release

_default:

    # VCS CONFIG
    vcs: git

    # PREREQUISITES
    prerequisites:
     - working-copy-check
     - tests-check:
          command: bin/phpunit -c app

    # GENERAL CONFIG
    version-generator: simple
    version-persister: "src/Janus/ServiceRegistry/Release/Version/Persister/JanusVersionPersister.php"
    post-release-actions:
      - src/Janus/ServiceRegistry/Release/Action/BuildArchiveAction.php

# BRANCH SPECIFIC CONFIG
#  On master, we override the general config
master:
feature/401-self-containing-archive:
    version-generator: semantic # More complex versioning (semantic)
    version-persister:
        vcs-tag:
            tag-prefix: ''         # No more prefix for tags
    pre-release-actions:
        changelog-update:          # Update a CHANGELOG file before the release
            format: semantic
            file: CHANGES
        vcs-commit: ~              # Commit the CHANGELOG